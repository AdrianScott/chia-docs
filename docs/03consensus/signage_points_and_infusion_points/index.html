<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-03consensus/signage_points_and_infusion_points">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">3.5 Signage Points and Infusion Points | Chia Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.chia.net/img/og-chia.png"><meta data-rh="true" name="twitter:image" content="https://docs.chia.net/img/og-chia.png"><meta data-rh="true" property="og:url" content="https://docs.chia.net/docs/03consensus/signage_points_and_infusion_points"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="3.5 Signage Points and Infusion Points | Chia Documentation"><meta data-rh="true" name="description" content="Each sub-slot in both the challenge chain and the reward chain is divided into 64 smaller VDFs. Between each of these smaller VDFs is a point called a signage point. Timelords publish the VDF output and proof when they reach each signage point."><meta data-rh="true" property="og:description" content="Each sub-slot in both the challenge chain and the reward chain is divided into 64 smaller VDFs. Between each of these smaller VDFs is a point called a signage point. Timelords publish the VDF output and proof when they reach each signage point."><link data-rh="true" rel="icon" href="/img/chia_leaf_green.svg"><link data-rh="true" rel="canonical" href="https://docs.chia.net/docs/03consensus/signage_points_and_infusion_points"><link data-rh="true" rel="alternate" href="https://docs.chia.net/docs/03consensus/signage_points_and_infusion_points" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.chia.net/zh/docs/03consensus/signage_points_and_infusion_points" hreflang="zh"><link data-rh="true" rel="alternate" href="https://docs.chia.net/docs/03consensus/signage_points_and_infusion_points" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6HSSLLPE6Q"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-6HSSLLPE6Q",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.53fff098.css">
<link rel="preload" href="/assets/js/runtime~main.fadd5598.js" as="script">
<link rel="preload" href="/assets/js/main.cddefa3e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#0d3349;color:#fff" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">CAT2 Standard Released ðŸŒ±<a target="_blank" rel="noopener noreferrer" href="/docs/cat2/cat2-intro/"> Learn about CAT1 end-of-life and CAT2 reissuance</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/chia_leaf_green.svg" alt="Chia Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/chia_leaf_green.svg" alt="Chia Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"> Chia Docs</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/01introduction/what-is-chia">Docs</a><a href="https://www.chia.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Chia.net</a><a href="https://github.com/Chia-Network/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Chia Github</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/03consensus/signage_points_and_infusion_points" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/docs/03consensus/signage_points_and_infusion_points" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">ä¸­æ–‡</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cat2/cat2-intro">CAT2 Upgrade Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/01introduction/what-is-chia">1 - Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/02architecture/p2p-system">2 - Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/03consensus/consensus_intro">3 - Consensus Algorithm</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/03consensus/consensus_intro">3.1 Chia Consensus Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/03consensus/proof-of-space">3.2 Proof of Space</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/03consensus/vdfs">3.3 VDFs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/03consensus/challenges">3.4 Challenges</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/03consensus/signage_points_and_infusion_points">3.5 Signage Points and Infusion Points</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/03consensus/harvester_algorithm">3.6 Harvester Algorithm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/03consensus/multiple_blocks">3.7 Multiple Blocks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/03consensus/three_vdf_chains">3.8 Three VDF Chains</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/03consensus/overflow_blocks">3.9 Overflow Blocks and Weight</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/03consensus/foliage">3.10 Foliage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/03consensus/epochs">3.11 Epoch and Difficulty Adjustment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/03consensus/light_clients">3.12 Light Clients</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/03consensus/timelords">3.13 Timelord Algorithm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/03consensus/attacks_and_countermeasures">3.14 Relevant Attacks and Countermeasures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/03consensus/analysis">3.15 Analysis</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/04coin-set-model/intro">4 - Coin Set Model</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/05block-validation/block-validation">5 - Block Validation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/06mempool/mempool">6 - Mempool</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/07networking/networking">7 - Networking</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/08serialization/serialization">8 - Serialization</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/09keys/keys-and-signatures">9 - Keys and Signatures</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/10protocol/protocol">10 - Protocol</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/11pooling/pooling">11 - Pool Protocol</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/12rpcs/rpcs">12 - RPC APIs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/13cli/cli">13 - Command Line Interface</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/14python-implementation/python-implementation">14 - Python Implementation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/15resources/references">15 - Resources</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">3 - Consensus Algorithm</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">3.5 Signage Points and Infusion Points</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>3.5 Signage Points and Infusion Points</h1><p>Each sub-slot in both the challenge chain and the reward chain is divided into 64 smaller VDFs. Between each of these smaller VDFs is a point called a <strong>signage point</strong>. Timelords publish the VDF output and proof when they reach each signage point.</p><blockquote><p>The challenge and reward chains both have signage points. The infused challenge chain, however, does not.</p></blockquote><p>The signage points occur every 9.375 seconds (64 signage points per 600-second sub-slot). The number of iterations between each signage point is <strong>sp_interval_iterations</strong>, which is equal to sub-slot_iterations / 64.</p><p>The challenge at the start of the sub-slot is also a valid signage point. As each of the 64 signage points in the sub-slot is reached, those points are broadcast, starting from the fastest timelord&#x27;s full node, and propagating to every other full node on the network.</p><p>Farmers receive these signage points and compute a hash for each plot, at each signage point. If the hash starts with nine zeros, the plot passes the filter for that signage point, and can proceed. This disqualifies around 511/512 of all plot files in the network, for that signage point. The formula to compute the filter hash is:</p><p><code>plot filter bits = sha256(plot id + sub slot challenge + cc signage point)</code></p><p>The proof of space challenge is computed as the hash of the plot filter bits:</p><p><code>PoSpace challenge = sha256(plot filter bits)</code></p><p>Using this challenge, the farmers fetch quality strings for each plot that made it past the filter. Recall that this process requires around seven random disk seeks, which takes around 70 ms on a slow HDD. The quality string is a hash derived from part of the proof of space (but the whole proof of space has yet to be retrieved).</p><blockquote><p>For both of our <a title="Section 3.4: Challenges" href="/docs/03consensus/challenges">previous example</a>, as well as the next example, we&#x27;ll use the following values:</p></blockquote><ul><li>sub-slot_iterations = 100,000,000</li><li>sp_interval_iterations = <code>sub-slot_iterations</code> / 64 = 1,562,500</li></ul><p>The farmer computes the <strong>required_iterations</strong> for each proof of space. If the required_iterations &lt; sp_interval_iterations, the proof of space is eligible for inclusion into the blockchain. At this point, the farmer fetches the entire proof of space from disk (which requires 64 disk seeks, or 640 ms on a slow HDD), creates an unfinished block, and broadcasts it to the network.</p><blockquote><p>For the vast majority of eligible plots, required_iterations will be far too high, since on average 32 will qualify for the whole network for each 10-minute sub-slot. This is a random process so it&#x27;s possible (though unlikely) for a large number of proofs to qualify. The signage_point_iterations is the number of iterations from the start of the sub-slot to the signage point. Any plot that does meet the required_iterations for a signage point will qualify as there is no rivalry between winning plots.</p></blockquote><p>The exact method for required_iterations is the following:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">sp_quality_string </span><span class="token operator">=</span><span class="token plain"> sha256</span><span class="token punctuation" style="color:#383a42">(</span><span class="token plain">quality_string </span><span class="token operator">+</span><span class="token plain"> cc_signage_point</span><span class="token punctuation" style="color:#383a42">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">required_iterations </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#383a42">(</span><span class="token plain">difficulty</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    </span><span class="token operator">*</span><span class="token plain"> difficulty_constant_factor</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    </span><span class="token operator">*</span><span class="token plain"> </span><span class="token builtin" style="color:#127EAF">int</span><span class="token punctuation" style="color:#383a42">.</span><span class="token plain">from_bytes</span><span class="token punctuation" style="color:#383a42">(</span><span class="token plain">sp_quality_string</span><span class="token punctuation" style="color:#383a42">,</span><span class="token plain"> </span><span class="token string" style="color:#B35C00;font-weight:normal">&quot;big&quot;</span><span class="token punctuation" style="color:#383a42">,</span><span class="token plain"> signed</span><span class="token operator">=</span><span class="token boolean" style="color:#B35C00;font-weight:normal">False</span><span class="token punctuation" style="color:#383a42">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    </span><span class="token operator">//</span><span class="token plain"> </span><span class="token builtin" style="color:#127EAF">pow</span><span class="token punctuation" style="color:#383a42">(</span><span class="token number" style="color:#B35C00;font-weight:normal">2</span><span class="token punctuation" style="color:#383a42">,</span><span class="token plain"> </span><span class="token number" style="color:#B35C00;font-weight:normal">256</span><span class="token punctuation" style="color:#383a42">)</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> expected_plot_size</span><span class="token punctuation" style="color:#383a42">(</span><span class="token plain">size</span><span class="token punctuation" style="color:#383a42">)</span><span class="token punctuation" style="color:#383a42">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The difficulty constant factor is based on the initial constants of the blockchain. For Chia, it is <code>2^67</code>. The difficulty varies per epoch, as explained in <a title="Section 3.11: Epochs and Difficulty Adjustment" href="/docs/03consensus/epochs">Section 3.11</a>. As you can see, the <strong>sp_quality_string</strong> is converted into a random number between 0 and 1, by dividing it by <code>2^256</code>, and then multiplied by the plot size.</p><p>For consensus purposes, the <code>expected_plot_size</code> is <code>((2 * k) + 1) * (2 ** (k - 1)).</code>, where k&gt;=32&lt;50. The actual plot size is that value times a constant factor, in bytes. This is because each entry in the plot is around <code>k+0.5</code> bits, and there are around <code>2^(k)</code> entries.</p><p>The <strong>infusion_iterations</strong> is the number of iterations from the start of the sub-slot at which the block with at least the required quality can be included into the blockchain. This is calculated as:</p><p><code>infusion_iterations = ( signage_point_iterations + 3 * sp_interval_iterations + required_iterations) % sub-slot_iterations</code></p><p>Therefore, infusion_iterations will be between 3 and 4 signage points after the current signage point. Farmers must submit their proofs and blocks before the infusion point is reached. The modulus is there to allow overflows into the next sub-slot, if the signage point is near the end of the sub-slot. This is expanded on in <a title="Section 3.9: Overflow Blocks and Weight" href="/docs/03consensus/overflow_blocks">Section 3.9</a>.</p><blockquote><p>More information on infusion points is available in <a title="Section 3.3: VDFs" href="/docs/03consensus/vdfs#infusion">Section 3.3</a>.</p></blockquote><figure><img loading="lazy" src="/img/signage_points.png" alt="drawing" class="img_ev3q"><figcaption>Figure 5: timelords create proofs for both the signage point and the infusion point. But they only infuse (change the VDF classgroup) for the latter. Squares symbolize infusions, where a new VDF is started.</figcaption></figure><p>Figure 5 shows the infusion point as a green square marked <code>b1</code>. The first and last blocks of the sub-slot are marked <code>r1</code> and <code>r2</code>, respectively. For this example, the farmer will create the block at the time of the signage point marked with a red arrow, which we&#x27;ll call <code>b1&#x27;</code>.</p><p>At <code>b1</code>, the farmer&#x27;s block gets combined with the VDF output for that point. This creates a new input for the VDF from that point on, i.e. we infuse the farmerâ€™s block into the VDF. <code>b1</code> is only fully valid after two events have occurred:</p><ol><li>infusion_iterations has been reached, and</li><li>Two VDF proofs have been included: one from <code>r1</code> to the signage point and one from <code>r1</code> to <code>b1</code>. (Actually itâ€™s more since there are three VDF chains, explained in <a title="Section 3.8: Three VDF Chains" href="/docs/03consensus/three_vdf_chains">Section 3.8</a>).</li></ol><p>In Figure 5, the farmer creates the block at the time of the signage point, <code>b1â€™</code>. However, <code>b1â€™</code> is not finished yet, since it needs the infusion point VDF. Once the infusion_iterations VDF has been released, it is added to <code>b1â€™</code> to form the finished block at <code>b1</code>.</p><blockquote><p>Recall that in this example,</p></blockquote><ul><li>sub-slot_iterations = 100M</li><li>sp_interval_iterations is 1.5625M.
Furthermore, letâ€™s say a farmer has a total of 1000 plots.</li></ul><p>For each of the 64 signage points, as they are released to the network every 9.375 seconds, or every 1.5625M iterations, the farmer computes the plot filter and sees how many plots pass. For each passing plot, the farmer calculates required_iterations.</p><p>Let&#x27;s say the farmer calculates required_iterations &lt; 1.5625M once in the sub-slot. (We&#x27;ll assume the exact required_iterations = 0.7828M in this instance.) Figure 5 shows this happening at the 20th signage point.</p><p>infusion_iterations is then computed as:</p><p>infusion_iterations = signage_point_iterations + (3 <!-- -->*<!-- --> sp_interval_iterations) + required_iterations</p><p>= (signage<em>point </em> sp<em>interval_iterations) + (3 </em> sp_interval_iterations) + required_iterations</p><p>= (20<em>1.5625M) + (3 </em> 1.5626M) + 0.7827M</p><p>= 36.7223M</p><p>After realizing they have won (at the 20th infusion point), the farmer fetches the whole proof of space, makes a block (optionally including transactions), and broadcasts this to the network. The block has until infusion_iterations (typically a few seconds) to reach timelords, who will infuse the block, creating the infusion point VDFs. With these VDFs, the block can be finished and added to the blockchain by full nodes.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rationale-for-choosing-64-signage-points">Rationale for choosing 64 signage points<a class="hash-link" href="#rationale-for-choosing-64-signage-points" title="Direct link to heading">â€‹</a></h2><p>Chia&#x27;s original consensus, which was phased out before the launch of mainnet, used a single signage point per 10-minute subslot. This left the network vulnerable to short-range <a href="/docs/03consensus/attacks_and_countermeasures#short-range-replotting-attack">replotting attacks</a>, where an attacker initiates a plot&#x27;s creation after a signage point, and completes the plot before the next infusion point. The attacker could always choose a plot that passes the plot filter (because the signage point is hashed with the subslot challenge and the plot ID in calculating the filter) and then delete the plot after the infusion point. For a 512-filter, this would result in the attacker mimicking 512 plots (~51 TiB). In reality, under the original consensus, he or she would only need to own single computer capable of creating a plot in less than ten minutes.</p><blockquote><p>NOTE: Technically this isn&#x27;t an <em>attack</em> because -- even if successful -- the &quot;attacker&quot; wouldn&#x27;t gain an ability to cheat the network. However the &quot;attacker&quot; <em>would</em> be using the network in an unintended way, effectively turning Chia into a Proof of Work system. Therefore, Chia&#x27;s new consensus was intentionally designed to discourage this behavior.</p></blockquote><p>The new consensus was introduced during Chia&#x27;s beta phase. One of the modifications was to increase the number of signage points to 64 per 10-minute subslot, or one every 9.375 (600/64) seconds, on average. The Challenge Chain was also introduced (see <a title="Section 3.8: Three VDF Chains" href="/docs/03consensus/three_vdf_chains">Section 3.8</a> for more info). The maximum distance between a signage point and the next infusion point is now 4 signage points (see the <code>infusion_iterations</code> formula, above), or 37.5 seconds. This is the maximum amount of time for the attack to be possible, but for it to be consistently applied, the minimum time of 28.125 seconds must be applied. Assuming a few extra seconds for network latency and other factors, the attack is now only possible if one can create a new plot in less than 25 seconds.</p><blockquote><p>Keep in mind that this &quot;attack&quot; is really mimicking the ownership of around 51 TiB of storage. Even when it does become possible to run the attack consistently, it will likely be much cheaper to use the network as intended, storing plots on non-volatile storage.</p></blockquote><p>This begs the question: why not use even more signage points in the consensus? The simple answer is because as the signage points increase, it becomes more difficult for the timelords and nodes to keep up with the network. Sixty-four signage points per subslot was deemed enough to discourage the attack laid out above, while still allowing the timelords and nodes to perform as intended and to stay in sync.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="definitions">Definitions<a class="hash-link" href="#definitions" title="Direct link to heading">â€‹</a></h2><p><strong>Quality string</strong>: A small part of the proof of space, 2 <em>x values</em> out of the total 64 <em>x values</em>, which can be retrieved efficiently from disk, and which values_to_fetch is determined by the signage point.</p><p><strong>sp_quality_string</strong>: A hash of the quality string concatenated with the challenge chain&#x27;s signage point. This hash is what ultimately decides the &quot;luck&quot; of a certain proof, using the size of required_iterations.</p><p><strong>sp_interval_iterations</strong>: Defined as floor(sub-slot_iterations / 64).</p><p><strong>Signage points</strong>: 64 intermediary points in time within a sub-slot in both the challenge and reward chains, for which VDFs are periodically released. At each signage point, a VDF output is created and broadcast through the network. The first signage point in the sub-slot is the challenge itself. Each block has a signage point such that the proof of space in the block must be eligible for that signage point.</p><p><strong>required_iterations</strong>: A number computed using the quality string, used to choose proofs of space which are eligible to make blocks. The vast majority of proofs of space will have required_iterations which are too high, and thus not eligible for inclusion into the chain. This number is used to compute the infusion point.</p><p><strong>Infusion point</strong>: The point in time at infusion_iterations from the challenge point, for a proof of space with a certain challenge and infusion_iterations. At this point, the farmerâ€™s block gets infused into the reward chain VDF. The infusion point of a block is always between 3 and 4 signage points after the signage point of that block. Computed as signage_point_iterations + 3 <!-- -->*<!-- --> sp_interval_iterations + required_iterations.</p><p>The delay between the signage point and infusion point has many benefits, including defense against orphaning and selfish farming, decreased forks, and no VDF pauses. This delay of around 28 seconds is given so that farmers have enough time to sign without delaying the slot VDF. Well-behaving farmers sign only one signage point with each proof of space, meaning that attackers cannot easily reorg the chain.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Chia-Network/chia-docs/blob/main/docs/03consensus/signage_points_and_infusion_points.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/03consensus/challenges"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">3.4 Challenges</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/03consensus/harvester_algorithm"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">3.6 Harvester Algorithm</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#rationale-for-choosing-64-signage-points" class="table-of-contents__link toc-highlight">Rationale for choosing 64 signage points</a></li><li><a href="#definitions" class="table-of-contents__link toc-highlight">Definitions</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Approach</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.chia.net/approach" target="_blank" rel="noopener noreferrer" class="footer__link-item">White Paper</a></li></ul></div><div class="col footer__col"><div class="footer__title">Technology</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.chia.net/greenpaper" target="_blank" rel="noopener noreferrer" class="footer__link-item">Green Paper</a></li><li class="footer__item"><a href="https://docs.chia.net/docs/03consensus/consensus_intro/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Consensus 1.1</a></li></ul></div><div class="col footer__col"><div class="footer__title">Developers</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.chia.net/grants" target="_blank" rel="noopener noreferrer" class="footer__link-item">Grants</a></li><li class="footer__item"><a href="https://www.chialisp.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chialisp</a></li></ul></div><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://chia.net/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About</a></li><li class="footer__item"><a href="https://chia.net/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://chia.net/contact" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2022 Chia Network Inc., Licensed under the <a href="https://github.com/Chia-Network/chia-docs/blob/main/LICENSE" target="_blank">Apache License, Version 2.0</a> | <a href="https://www.chia.net/terms">Terms</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.fadd5598.js"></script>
<script src="/assets/js/main.cddefa3e.js"></script>
</body>
</html>